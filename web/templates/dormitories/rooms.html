{% extends "layout.html" %}

{% block content %}
    <ul class="breadcrumb">
        <li>
            <a href="{{ url_for('dormitories.overview') }}">Wohnheime</a> <span class="divider">/</span>
        </li>
        <li>
            <a href="{{ url_for('dormitories.dormitory_levels', dormitory_id=dormitory.id) }}">
                {{ dormitory.short_name }}
            </a> <span class="divider">/</span>
        </li>
        <li class="active">Etage {{ level }}</li>
    </ul>
    <div class="span6">
        <table class="table table-striped">
            <thead>
                <tr><th>Raum</th><th>Bewohner</th></tr>
            </thead>
            <tbody>
                {% for room in rooms %}
                        {% if not room.users %}
                            <tr>
                                <td><a href="{{ url_for(".room_show",room_id=room.id) }}">{{ level }}-{{ room.number }}</a></td>
                                <td>&nbsp;</td>
                        {% else %}
                            {% for user in room.users %}
                                {% if user is not user_with_positive_balance %}
                                    <tr class="warning">
                                        <td><a href="{{ url_for(".room_show",room_id=room.id) }}">{{ level }}-{{ room.number }}</a></td>
                                        <td><a href="{{ url_for("user.user_show",user_id=user.id) }}">{{ user.name }}</a></td>
                                {% else %}
                                    {% if user is user_with_no_internet %}
                                        <tr class="error">
                                            <td><a href="{{ url_for(".room_show",room_id=room.id) }}">{{ level }}-{{ room.number }}</a></td>
                                            <td><a href="{{ url_for("user.user_show",user_id=user.id) }}">{{ user.name }}</a></td>
                                    {% else %}
                                        {% if user is user_with_traffic_exceeded %}
                                            <tr class="info">
                                                <td><a href="{{ url_for(".room_show",room_id=room.id) }}">{{ level }}-{{ room.number }}</a></td>
                                                <td><a href="{{ url_for("user.user_show",user_id=user.id) }}">{{ user.name }}</a></td>
                                        {% else %}
                                            <tr class="success">
                                                <td><a href="{{ url_for(".room_show",room_id=room.id) }}">{{ level }}-{{ room.number }}</a></td>
                                                <td><a href="{{ url_for("user.user_show",user_id=user.id) }}">{{ user.name }}</a></td>
                                        {% endif %}
                                    {% endif %}
                                {% endif %}
                                </tr>
                            {% endfor %}
                        {% endif %}
                    {% endfor %}
            </tbody>
        </table>
    </div>
{% endblock %}
