{#
 Copyright (c) 2012 The Pycroft Authors. See the AUTHORS file.
 This file is part of the Pycroft project and licensed under the terms of
 the Apache License, Version 2.0. See the LICENSE file for details.
#}
{% if user.hosts %}
    {% for host in user.hosts %}
        <h3 class="row hoverable">
            <small style="float: right"><a class="" title="Löschen!" href="#"><i
                    class="icon-remove"></i></a></small>
            <span class="span6">Host: <a href="{{ url_for("infrastructure.host_show", host_id = host.id) }}">{{ host.hostname }}</a></span>
            <small class="span2">
                {% if host.room %}
                    {{ host.room.dormitory.short_name }} {{ host.room.level }}-{{ host.room.number }}
                {% else %}
                    no room
                {% endif %}
            </small>
            <small class="span1">Alias:
                {%  if host.aliases %}
                    {{ host.aliases|length }}
                {% else %}
                    0
                {% endif %}
            </small>
            <small class="span1">IPs:
                {% if host.ips %}
                    {{ host.ips|length }}</small>
                {% else %}
                    0
                {% endif %}
            </small>
            <small class="span1">Traffic: {{ host|host_traffic }}</small>
        </h3>

        {% if host.aliases %}
            <table class="table">
                <thead>
                <tr>
                    <th>Type</th>
                    <th>Information</th>
                    <th></th>
                </tr>
                </thead>
                <tbody>
                {% for alias in host.aliases %}
                    <tr>
                        <td>{{ alias.name_human }}</td>
                        <td>{{ alias.information_human }}</td>
                        {% if alias.name_human != "ARecord" %}
                            <td style="text-align: right"><a href="{{ url_for("infrastructure.edit_alias", host_id=host.id, alias_id=alias.id) }}" title="Bearbeiten"><i class="icon-edit"></i></a> <a href="#" title="Löschen"><i class="icon-remove"></i></a></td>
                        {% else %}
                            <td></td>
                        {% endif %}
                    </tr>
                {% endfor %}
                </tbody>
            </table>

        {% endif %}

        {% if host.ips %}
            <table class="table">
                <thead>
                <tr>
                    <th>Mac-Adresse</th>
                    <th>IP-Adresse</th>
                    <th>Switch</th>
                    <th>Port(s)</th>
                    <th></th>
                </tr>
                </thead>
                <tbody>
                {% for ip in host.ips %}
                    <tr>
                        <td>{{ ip.net_device.mac }}</td>
                        <td>{{ ip.address }}</td>
                        <td>TODO</td>
                        <td>TODO</td>
                        <td style="text-align: right"><a href="#" title="Bearbeiten"><i class="icon-edit"></i></a> <a href="#" title="Löschen"><i class="icon-remove"></i></a></td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        {% else %}
            <p>Keine IP-Adressen vergeben!</p>
        {% endif %}
        <p>&nbsp;</p>
    {% endfor %}
{% else %}
    Nutzer hat keine Hosts.
{% endif %}
